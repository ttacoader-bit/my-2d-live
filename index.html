<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2D 3D Live App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary-blue: #0047ff; --bg-light: #f4f7f6; }
        body { background-color: var(--bg-light); font-family: sans-serif; margin: 0; padding: 0; }
        .top-header { padding: 20px; text-align: center; background: white; }
        .main-live-number { font-size: 70px; font-weight: 900; margin: 0; }
        .update-tag { background: #e1f5fe; color: #039be5; padding: 5px 15px; border-radius: 20px; font-size: 13px; }
        .result-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 15px; }
        .card { border-radius: 25px; padding: 20px; color: white; text-align: center; background: linear-gradient(135deg, #0047ff, #002db3); }
        .card-num { font-size: 38px; font-weight: bold; margin: 10px 0; }
        .list-container { background: white; margin: 0 15px; border-radius: 20px; padding: 10px 20px; }
        .list-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px solid #eee; }
        .internet-box { background: #2962ff; color: white; padding: 5px 10px; border-radius: 8px; font-weight: bold; }
        .nav-bar { background: white; display: flex; justify-content: space-around; padding: 15px 0; border-top: 1px solid #eee; position: fixed; bottom: 0; width: 100%; }
        .nav-item { text-align: center; color: #aaa; flex: 1; font-size: 11px; }
        .nav-item.active { color: var(--primary-blue); }
    </style>
</head>
<body>

<div class="top-header">
    <h1 class="main-live-number" id="main-num">--</h1>
    <span class="update-tag"><i class="fas fa-check-circle"></i> Update : <span id="sync-time">Loading...</span></span>
</div>

<div class="result-grid">
    <div class="card">
        <div>12:01 PM</div>
        <div class="card-num" id="morning-num">--</div>
        <div style="font-size:11px">SET: <span id="m-set">--</span> | VAL: <span id="m-val">--</span></div>
    </div>
    <div class="card" style="background: linear-gradient(135deg, #1e40af, #1e3a8a);">
        <div>04:30 PM</div>
        <div class="card-num" id="evening-num">--</div>
        <div style="font-size:11px">SET: <span id="e-set">--</span> | VAL: <span id="e-val">--</span></div>
    </div>
</div>

<div class="list-container">
    <div class="list-item">
        <div><small>Modern</small><div id="modern-930" style="font-weight:bold">--</div></div>
        <div style="color:#888">9:30 AM</div>
        <div><small>Internet</small><div class="internet-box" id="internet-930">--</div></div>
    </div>
    <div class="list-item">
        <div><small>Modern</small><div id="modern-200" style="font-weight:bold">--</div></div>
        <div style="color:#888">2:00 PM</div>
        <div><small>Internet</small><div class="internet-box" id="internet-200">--</div></div>
    </div>
</div>

<div class="nav-bar">
    <div class="nav-item active"><i class="fas fa-home"></i><br>Home</div>
    <div class="nav-item"><i class="fas fa-calendar-alt"></i><br>Calendar</div>
    <div class="nav-item"><i class="fas fa-gift"></i><br>Tips</div>
    <div class="nav-item"><i class="fas fa-chart-line"></i><br>3D</div>
</div>

<script>
async function updateData() {
    try {
        // ပိုမိုမြန်ဆန်တဲ့ အရန် API Source တစ်ခုကို သုံးထားပါတယ်
        const res = await fetch('https://api.thaistock2d.com/live');
        const data = await res.json();
        
        if(data && data.live) {
            document.getElementById('main-num').innerText = data.live.twod;
            document.getElementById('sync-time').innerText = data.live.time;

            const results = data.result;
            
            // 9:30 AM
            const r930 = results.find(r => r.open_time.includes("09:30"));
            document.getElementById('modern-930').innerText = r930?.modern || "--";
            document.getElementById('internet-930').innerText = r930?.twod || "--";

            // 12:01 PM
            const r1201 = results.find(r => r.open_time.includes("12:01"));
            document.getElementById('morning-num').innerText = r1201?.twod || "--";
            document.getElementById('m-set').innerText = r1201?.set || "--";
            document.getElementById('m-val').innerText = r1201?.value || "--";

            // 2:00 PM
            const r200 = results.find(r => r.open_time.includes("14:00"));
            document.getElementById('modern-200').innerText = r200?.modern || "--";
            document.getElementById('internet-200').innerText = r200?.twod || "--";

            // 4:30 PM
            const r1630 = results.find(r => r.open_time.includes("16:30"));
            if(r1630 && r1630.twod) {
                document.getElementById('evening-num').innerText = r1630.twod;
                document.getElementById('e-set').innerText = r1630.set;
                document.getElementById('e-val').innerText = r1630.value;
            }
        }
    } catch (e) { console.error("Error:", e); }
}

setInterval(updateData, 2000);
updateData();
window.Telegram.WebApp.ready();
window.Telegram.WebApp.expand();
</script>

</body>
</html>
